<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3.3 Stability dependence with discrete binning (binning) | Introduction" />
<meta property="og:type" content="book" />


<meta name="github-repo" content="openscapes/series" />

<meta name="author" content="" />

<meta name="date" content="2024-06-04" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="3.3 Stability dependence with discrete binning (binning) | Introduction">

<title>3.3 Stability dependence with discrete binning (binning) | Introduction</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if bootstrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#welcome" id="toc-welcome"><span class="toc-section-number">1</span> Welcome</a></li>
<li class="has-sub"><a href="2-step-1-post-processing-of-the-raw-eddy-covariance-data.html#step-1-post-processing-of-the-raw-eddy-covariance-data" id="toc-step-1-post-processing-of-the-raw-eddy-covariance-data"><span class="toc-section-number">2</span> Step 1: Post-processing of the raw eddy-covariance data</a>
<ul>
<li><a href="2-step-1-post-processing-of-the-raw-eddy-covariance-data.html#eddy-covariance-method" id="toc-eddy-covariance-method"><span class="toc-section-number">2.0.1</span> Eddy-covariance method</a></li>
<li><a href="2-step-1-post-processing-of-the-raw-eddy-covariance-data.html#literature" id="toc-literature"><span class="toc-section-number">2.0.2</span> Literature</a></li>
</ul></li>
<li class="has-sub"><a href="3-calculation-of-some-basic-turbulence-quantities.html#calculation-of-some-basic-turbulence-quantities" id="toc-calculation-of-some-basic-turbulence-quantities"><span class="toc-section-number">3</span> Calculation of some basic turbulence quantities</a>
<ul>
<li><a href="3.1-calculation-of-standard-turbulence-diagnostics-and-simple-timeseries-plots.html#calculation-of-standard-turbulence-diagnostics-and-simple-timeseries-plots" id="toc-calculation-of-standard-turbulence-diagnostics-and-simple-timeseries-plots"><span class="toc-section-number">3.1</span> Calculation of standard turbulence diagnostics and simple timeseries plots</a></li>
<li><a href="3.2-regime-plots.html#regime-plots" id="toc-regime-plots"><span class="toc-section-number">3.2</span> Regime plots</a></li>
<li><a href="3.3-stability-dependence-with-discrete-binning-binning.html#stability-dependence-with-discrete-binning-binning" id="toc-stability-dependence-with-discrete-binning-binning"><span class="toc-section-number">3.3</span> Stability dependence with discrete binning (<code>binning</code>)</a></li>
<li><a href="3.4-literature-1.html#literature-1" id="toc-literature-1"><span class="toc-section-number">3.4</span> Literature</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="stability-dependence-with-discrete-binning-binning" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Stability dependence with discrete binning (<code>binning</code>)</h2>
<p>Often it is interesting to investigate the stability dependence of turbulence characteristics. For this the function <code>binning</code> can be used, which bins one variable based on another for predefined bins, as exemplified below for the dependence of the sensible heat flux on the stability parameter. The output contains mean, median, 25% and 75% quartile per discrete bin as dataframe. The used variables and the bins can be customized. Such type of analysis is usually applied to longer timeseries.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-1" tabindex="-1"></a>zeta_bins<span class="ot">=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span><span class="sc">^</span>(<span class="dv">2</span><span class="sc">:-</span><span class="dv">2</span>),<span class="dv">10</span><span class="sc">^</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">:</span><span class="dv">2</span>))</span>
<span id="cb15-2"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-2" tabindex="-1"></a>sh_binned<span class="ot">=</span><span class="fu">binning</span>(dat<span class="sc">$</span>sh,dat<span class="sc">$</span>zeta,zeta_bins)</span>
<span id="cb15-3"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-3" tabindex="-1"></a>sh_binned <span class="co">#look at output</span></span>
<span id="cb15-4"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-4" tabindex="-1"></a>xbins<span class="ot">=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span><span class="sc">^</span>(<span class="dv">2</span><span class="sc">:-</span><span class="dv">1</span>),<span class="dv">0</span>,<span class="dv">5</span><span class="sc">^</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>))</span>
<span id="cb15-5"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-5" tabindex="-1"></a><span class="fu">plot</span>(xbins,sh_binned[,<span class="dv">2</span>],<span class="at">type=</span><span class="st">&quot;b&quot;</span>,<span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">150</span>),<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">xlab=</span><span class="st">&quot;stability parameter [-]&quot;</span>,<span class="at">ylab=</span><span class="fu">TeX</span>(<span class="st">&quot;SH [W/m$^2$]&quot;</span>))</span>
<span id="cb15-6"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-6" tabindex="-1"></a><span class="fu">points</span>(xbins,sh_binned[,<span class="dv">3</span>],<span class="at">type=</span><span class="st">&quot;l&quot;</span>,<span class="at">lty=</span><span class="dv">2</span>,<span class="at">col=</span><span class="dv">2</span>)</span>
<span id="cb15-7"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-7" tabindex="-1"></a><span class="fu">points</span>(xbins,sh_binned[,<span class="dv">4</span>],<span class="at">type=</span><span class="st">&quot;l&quot;</span>,<span class="at">lty=</span><span class="dv">2</span>,<span class="at">col=</span><span class="dv">2</span>)</span>
<span id="cb15-8"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-8" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>,<span class="at">lty=</span><span class="dv">2</span>)</span>
<span id="cb15-9"><a href="3.3-stability-dependence-with-discrete-binning-binning.html#cb15-9" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v=</span><span class="dv">0</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code></pre></div>
<table class="dataframe">
<caption>
A matrix: 9 × 4 of type dbl
</caption>
<tbody>
<tr>
<td>
122.045246
</td>
<td>
116.804837
</td>
<td>
109.052920
</td>
<td>
129.797163
</td>
</tr>
<tr>
<td>
120.620398
</td>
<td>
125.471467
</td>
<td>
75.448402
</td>
<td>
167.986972
</td>
</tr>
<tr>
<td>
17.306097
</td>
<td>
12.061651
</td>
<td>
5.647776
</td>
<td>
24.415438
</td>
</tr>
<tr>
<td>
1.823135
</td>
<td>
1.864732
</td>
<td>
1.093005
</td>
<td>
2.574063
</td>
</tr>
<tr>
<td>
NA
</td>
<td>
NA
</td>
<td>
NA
</td>
<td>
NA
</td>
</tr>
<tr>
<td>
-3.564331
</td>
<td>
-3.564331
</td>
<td>
-3.564331
</td>
<td>
-3.564331
</td>
</tr>
<tr>
<td>
-11.192381
</td>
<td>
-12.213284
</td>
<td>
-13.937180
</td>
<td>
-8.561890
</td>
</tr>
<tr>
<td>
-18.102981
</td>
<td>
-19.201199
</td>
<td>
-22.358905
</td>
<td>
-14.674265
</td>
</tr>
<tr>
<td>
-8.655841
</td>
<td>
-10.389901
</td>
<td>
-11.853905
</td>
<td>
-6.324807
</td>
</tr>
</tbody>
</table>
<div class="float">
<img src="output_9_1.png" alt="png" />
<div class="figcaption">png</div>
</div>
</div>
<p style="text-align: center;">
<a href="3.2-regime-plots.html"><button class="btn btn-default">Previous</button></a>
<a href="3.4-literature-1.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
